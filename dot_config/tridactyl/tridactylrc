" " General Settings
set update.lastchecktime 1753276306497
set update.nag true
set update.nagwait 7
set update.lastnaggedversion 1.14.0
set update.checkintervalsecs 86400
set configversion 2.0
set theme catppuccin-macchiato
set smoothscroll true
set modeindicator false

" " " Binds
" " My custom global binds
bind u scrollline -30
bind d scrollline 30
bind x tabclose
unbind <C-f>
bind J tabprev
bind K tabnext

" Allow Ctrl-a to select all in the commandline
unbind --mode=ex <C-a>
 
" Allow Ctrl-c to copy in the commandline
unbind --mode=ex <C-c>


" " Make `gi` on GitHub take you to the search box
bindurl ^https://github.com gi hint -Vc .AppHeader-searchButton
 
" Gmail binds
unbindurl ^https://mail.google.com j
unbindurl ^https://mail.google.com k
unbindurl ^https://mail.google.com e
unbindurl ^https://mail.google.com gi
unbindurl ^https://mail.google.com x
unbindurl ^https://www.youtube.com f
unbindurl ^https://www.youtube.com t

" " Google binds
" Only hint search results on Google and DDG
bindurl www.google.com f hint -Jc #search a
bindurl www.google.com F hint -Jbc #search a
 
" Default Google binds
bindurl www.google.com gi composite focusinput -l ; text.end_of_line
bindurl www.google.com ;x hint -F e => { const pos = tri.dom.getAbsoluteCentre(e); tri.excmds.exclaim_quiet("xdotool mousemove --sync " + window.devicePixelRatio * pos.x + " " + window.devicePixelRatio * pos.y + "; xdotool click 1")}
bindurl www.google.com ;c hint -F e => { const pos = tri.dom.getAbsoluteCentre(e); tri.excmds.exclaim_quiet("xdotool mousemove --sync " + window.devicePixelRatio * pos.x + " " + window.devicePixelRatio * pos.y + "; xdotool click 3")}
bindurl www.google.com ;: hint -F e => { const pos = tri.dom.getAbsoluteCentre(e); tri.excmds.exclaim_quiet("xdotool mousemove --sync " + window.devicePixelRatio * pos.x + " " + window.devicePixelRatio * pos.y)}
bindurl www.google.com ;X hint -F e => { const pos = tri.dom.getAbsoluteCentre(e); tri.excmds.exclaim_quiet("xdotool mousemove --sync " + window.devicePixelRatio * pos.x + " " + window.devicePixelRatio * pos.y + "; xdotool keydown ctrl+shift; xdotool click 1; xdotool keyup ctrl+shift")}
bindurl www.google.com <A-p> pin
bindurl www.google.com <A-m> mute toggle
bindurl www.google.com <F1> help
bindurl www.google.com o fillcmdline open
bindurl www.google.com O current_url open
bindurl www.google.com w fillcmdline winopen
bindurl www.google.com W current_url winopen
bindurl www.google.com t fillcmdline tabopen
bindurl www.google.com ]] followpage next
bindurl www.google.com [[ followpage prev
bindurl www.google.com [c urlincrement -1
bindurl www.google.com ]c urlincrement 1
bindurl www.google.com <C-x> urlincrement -1
bindurl www.google.com <C-a> urlincrement 1
bindurl www.google.com T current_url tabopen
bindurl www.google.com yy clipboard yank
bindurl www.google.com ys clipboard yankshort
bindurl www.google.com yq text2qr --timeout 5
bindurl www.google.com yc clipboard yankcanon
bindurl www.google.com ym clipboard yankmd
bindurl www.google.com yo clipboard yankorg
bindurl www.google.com yt clipboard yanktitle
bindurl www.google.com gh home
bindurl www.google.com gH home true
bindurl www.google.com p clipboard open
bindurl www.google.com P clipboard tabopen
bindurl www.google.com j scrollline 10
bindurl www.google.com <C-e> scrollline 10
bindurl www.google.com k scrollline -10
bindurl www.google.com <C-y> scrollline -10
bindurl www.google.com h scrollpx -50
bindurl www.google.com l scrollpx 50
bindurl www.google.com G scrollto 100
bindurl www.google.com gg scrollto 0
bindurl www.google.com <C-u> scrollpage -0.5
bindurl www.google.com <C-d> scrollpage 0.5
bindurl www.google.com <C-f> scrollpage 1
bindurl www.google.com <C-b> scrollpage -1
bindurl www.google.com <C-v> nmode ignore 1 mode normal
bindurl www.google.com $ scrollto 100 x
bindurl www.google.com ^ scrollto 0 x
bindurl www.google.com H back
bindurl www.google.com L forward
bindurl www.google.com <C-o> jumpprev
bindurl www.google.com <C-i> jumpnext
bindurl www.google.com d scrollline 30
bindurl www.google.com D js tri.excmds.composite('tabprev;', 'tabclose #')
bindurl www.google.com gx0 tabclosealltoleft
bindurl www.google.com gx$ tabclosealltoright
bindurl www.google.com << tabmove -1
bindurl www.google.com >> tabmove +1
bindurl www.google.com u scrollline -30
bindurl www.google.com U undo window
bindurl www.google.com r reload
bindurl www.google.com R reloadhard
bindurl www.google.com x tabclose
bindurl www.google.com g? rot13
bindurl www.google.com g! jumble
bindurl www.google.com g; changelistjump -1
bindurl www.google.com J tabprev
bindurl www.google.com K tabnext
bindurl www.google.com gt tabnext_gt
bindurl www.google.com gT tabprev
bindurl www.google.com g^ tabfirst
bindurl www.google.com g0 tabfirst
bindurl www.google.com g$ tablast
bindurl www.google.com ga tabaudio
bindurl www.google.com gr reader --old
bindurl www.google.com gu urlparent
bindurl www.google.com gU urlroot
bindurl www.google.com gf viewsource
bindurl www.google.com : fillcmdline_notrail
bindurl www.google.com s fillcmdline open search
bindurl www.google.com S fillcmdline tabopen search
bindurl www.google.com M gobble 1 quickmark
bindurl www.google.com B fillcmdline taball
bindurl www.google.com b fillcmdline tab
bindurl www.google.com ZZ qall
bindurl www.google.com f hint
bindurl www.google.com F hint -b
bindurl www.google.com gF hint -qb
bindurl www.google.com ;i hint -i
bindurl www.google.com ;b hint -b
bindurl www.google.com ;o hint
bindurl www.google.com ;I hint -I
bindurl www.google.com ;k hint -k
bindurl www.google.com ;K hint -K
bindurl www.google.com ;y hint -y
bindurl www.google.com ;Y hint -cF img i => tri.excmds.yankimage(tri.urlutils.getAbsoluteURL(i.src))
bindurl www.google.com ;p hint -p
bindurl www.google.com ;h hint -h
bindurl www.google.com v hint -h
bindurl www.google.com ;P hint -P
bindurl www.google.com ;r hint -r
bindurl www.google.com ;s hint -s
bindurl www.google.com ;S hint -S
bindurl www.google.com ;a hint -a
bindurl www.google.com ;A hint -A
bindurl www.google.com ;; hint -; *
bindurl www.google.com ;# hint -#
bindurl www.google.com ;v hint -W mpvsafe
bindurl www.google.com ;V hint -V
bindurl www.google.com ;w hint -w
bindurl www.google.com ;t hint -W tabopen
bindurl www.google.com ;O hint -W fillcmdline_notrail open 
bindurl www.google.com ;W hint -W fillcmdline_notrail winopen 
bindurl www.google.com ;T hint -W fillcmdline_notrail tabopen 
bindurl www.google.com ;d hint -W tabopen --discard
bindurl www.google.com ;gd hint -qW tabopen --discard
bindurl www.google.com ;z hint -z
bindurl www.google.com ;m hint -JFc img i => tri.excmds.open('https://lens.google.com/uploadbyurl?url='+i.src)
bindurl www.google.com ;M hint -JFc img i => tri.excmds.tabopen('https://lens.google.com/uploadbyurl?url='+i.src)
bindurl www.google.com ;gi hint -qi
bindurl www.google.com ;gI hint -qI
bindurl www.google.com ;gk hint -qk
bindurl www.google.com ;gy hint -qy
bindurl www.google.com ;gp hint -qp
bindurl www.google.com ;gP hint -qP
bindurl www.google.com ;gr hint -qr
bindurl www.google.com ;gs hint -qs
bindurl www.google.com ;gS hint -qS
bindurl www.google.com ;ga hint -qa
bindurl www.google.com ;gA hint -qA
bindurl www.google.com ;g; hint -q;
bindurl www.google.com ;g# hint -q#
bindurl www.google.com ;gv hint -qW mpvsafe
bindurl www.google.com ;gw hint -qw
bindurl www.google.com ;gb hint -qb
bindurl www.google.com ;gF hint -qb
bindurl www.google.com ;gf hint -q
bindurl www.google.com <S-Insert> mode ignore
bindurl www.google.com <AC-Escape> mode ignore
bindurl www.google.com <AC-`> mode ignore
bindurl www.google.com <S-Escape> mode ignore
bindurl www.google.com <Escape> composite mode normal ; hidecmdline
bindurl www.google.com <C-[> composite mode normal ; hidecmdline
bindurl www.google.com a current_url bmark
bindurl www.google.com A bmark
bindurl www.google.com zi zoom 0.1 true
bindurl www.google.com zo zoom -0.1 true
bindurl www.google.com zm zoom 0.5 true
bindurl www.google.com zr zoom -0.5 true
bindurl www.google.com zM zoom 0.5 true
bindurl www.google.com zR zoom -0.5 true
bindurl www.google.com zz zoom 1
bindurl www.google.com zI zoom 3
bindurl www.google.com zO zoom 0.3
bindurl www.google.com . repeat
bindurl www.google.com <AS-ArrowUp><AS-ArrowUp><AS-ArrowDown><AS-ArrowDown><AS-ArrowLeft><AS-ArrowRight><AS-ArrowLeft><AS-ArrowRight>ba open https://www.youtube.com/watch?v=M3iOROuTuMA
bindurl www.google.com m gobble 1 markadd
bindurl www.google.com ` gobble 1 markjump

" " Whatsapp binds
bindurl ^https://web.whatsapp.com f hint -c [tabindex]:not(.two)>div,a
bindurl ^https://web.whatsapp.com F hint -bc [tabindex]:not(.two)>div,a

" " Default global binds
bind ;x hint -F e => { const pos = tri.dom.getAbsoluteCentre(e); tri.excmds.exclaim_quiet("xdotool mousemove --sync " + window.devicePixelRatio * pos.x + " " + window.devicePixelRatio * pos.y + "; xdotool click 1")}
bind ;c hint -F e => { const pos = tri.dom.getAbsoluteCentre(e); tri.excmds.exclaim_quiet("xdotool mousemove --sync " + window.devicePixelRatio * pos.x + " " + window.devicePixelRatio * pos.y + "; xdotool click 3")}
bind ;: hint -F e => { const pos = tri.dom.getAbsoluteCentre(e); tri.excmds.exclaim_quiet("xdotool mousemove --sync " + window.devicePixelRatio * pos.x + " " + window.devicePixelRatio * pos.y)}
bind ;X hint -F e => { const pos = tri.dom.getAbsoluteCentre(e); tri.excmds.exclaim_quiet("xdotool mousemove --sync " + window.devicePixelRatio * pos.x + " " + window.devicePixelRatio * pos.y + "; xdotool keydown ctrl+shift; xdotool click 1; xdotool keyup ctrl+shift")}
bind <A-p> pin
bind <A-m> mute toggle
bind <F1> help
bind o fillcmdline open
bind O current_url open
bind w fillcmdline winopen
bind W current_url winopen
bind t fillcmdline tabopen
bind ]] followpage next
bind [[ followpage prev
bind [c urlincrement -1
bind ]c urlincrement 1
bind <C-x> urlincrement -1
bind <C-a> urlincrement 1
bind T current_url tabopen
bind yy clipboard yank
bind ys clipboard yankshort
bind yq text2qr --timeout 5
bind yc clipboard yankcanon
bind ym clipboard yankmd
bind yo clipboard yankorg
bind yt clipboard yanktitle
bind gh home
bind gH home true
bind p clipboard open
bind P clipboard tabopen
bind j scrollline 10
bind <C-e> scrollline 10
bind k scrollline -10
bind <C-y> scrollline -10
bind h scrollpx -50
bind l scrollpx 50
bind G scrollto 100
bind gg scrollto 0
bind <C-u> scrollpage -0.5
bind <C-d> scrollpage 0.5
bind <C-b> scrollpage -1
bind <C-v> nmode ignore 1 mode normal
bind $ scrollto 100 x
bind ^ scrollto 0 x
bind H back
bind L forward
bind <C-o> jumpprev
bind <C-i> jumpnext
bind D js tri.excmds.composite('tabprev;', 'tabclose #')
bind gx0 tabclosealltoleft
bind gx$ tabclosealltoright
bind << tabmove -1
bind >> tabmove +1
bind U undo window
bind r reload
bind R reloadhard
bind gi focusinput -l
bind g? rot13
bind g! jumble
bind g; changelistjump -1
bind gt tabnext_gt
bind gT tabprev
bind g^ tabfirst
bind g0 tabfirst
bind g$ tablast
bind ga tabaudio
bind gr reader --old
bind gu urlparent
bind gU urlroot
bind gf viewsource
bind : fillcmdline_notrail
bind s fillcmdline open search
bind S fillcmdline tabopen search
bind M gobble 1 quickmark
bind B fillcmdline taball
bind b fillcmdline tab
bind ZZ qall
bind f hint
bind F hint -b
bind gF hint -qb
bind ;i hint -i
bind ;b hint -b
bind ;o hint
bind ;I hint -I
bind ;k hint -k
bind ;K hint -K
bind ;y hint -y
bind ;Y hint -cF img i => tri.excmds.yankimage(tri.urlutils.getAbsoluteURL(i.src))
bind ;p hint -p
bind ;h hint -h
bind v hint -h
bind ;P hint -P
bind ;r hint -r
bind ;s hint -s
bind ;S hint -S
bind ;a hint -a
bind ;A hint -A
bind ;; hint -; *
bind ;# hint -#
bind ;v hint -W mpvsafe
bind ;V hint -V
bind ;w hint -w
bind ;t hint -W tabopen
bind ;O hint -W fillcmdline_notrail open 
bind ;W hint -W fillcmdline_notrail winopen 
bind ;T hint -W fillcmdline_notrail tabopen 
bind ;d hint -W tabopen --discard
bind ;gd hint -qW tabopen --discard
bind ;z hint -z
bind ;m hint -JFc img i => tri.excmds.open('https://lens.google.com/uploadbyurl?url='+i.src)
bind ;M hint -JFc img i => tri.excmds.tabopen('https://lens.google.com/uploadbyurl?url='+i.src)
bind ;gi hint -qi
bind ;gI hint -qI
bind ;gk hint -qk
bind ;gy hint -qy
bind ;gp hint -qp
bind ;gP hint -qP
bind ;gr hint -qr
bind ;gs hint -qs
bind ;gS hint -qS
bind ;ga hint -qa
bind ;gA hint -qA
bind ;g; hint -q;
bind ;g# hint -q#
bind ;gv hint -qW mpvsafe
bind ;gw hint -qw
bind ;gb hint -qb
bind ;gF hint -qb
bind ;gf hint -q
bind <S-Insert> mode ignore
bind <AC-Escape> mode ignore
bind <AC-`> mode ignore
bind <S-Escape> mode ignore
bind <Escape> composite mode normal ; hidecmdline
bind <C-[> composite mode normal ; hidecmdline
bind a current_url bmark
bind A bmark
bind zi zoom 0.1 true
bind zo zoom -0.1 true
bind zm zoom 0.5 true
bind zr zoom -0.5 true
bind zM zoom 0.5 true
bind zR zoom -0.5 true
bind zz zoom 1
bind zI zoom 3
bind zO zoom 0.3
bind . repeat
bind <AS-ArrowUp><AS-ArrowUp><AS-ArrowDown><AS-ArrowDown><AS-ArrowLeft><AS-ArrowRight><AS-ArrowLeft><AS-ArrowRight>ba open https://www.youtube.com/watch?v=M3iOROuTuMA
bind m gobble 1 markadd
bind ` gobble 1 markjump

" Subconfig Settings
seturl www.google.com followpagepatterns.next Next
seturl www.google.com followpagepatterns.prev Previous
seturl ^https://teams.microsoft.com modeindicator false
seturl ^https://teams.live.com modeindicator false

" Autocmds
autocmd DocLoad ^https://github.com/tridactyl/tridactyl/issues/new$ issue
autocmd TriStart .* source_quiet

" For syntax highlighting see https://github.com/tridactyl/vim-tridactyl
" vim: set filetype=tridactyl

" " " Stuff from GitHub example file to consider using
" " Comment toggler for Reddit, Hacker News and Lobste.rs
" bind ;c hint -Jc [class*="expand"],[class*="togg"],[class="comment_folder"]
 
" " Handy multiwindow/multitasking binds
" bind gd tabdetach
" bind gD composite tabduplicate; tabdetach
 
" " Stupid workaround to let hint -; be used with composite which steals semi-colons
" command hint_focus hint -;
 
" " Open right click menu on links
" bind ;C composite hint_focus; !s xdotool key Menu
 
" " Binds for new reader mode
" bind gr reader
" bind gR reader --tab

" " Suspend / "discard" all tabs - handy for stretching out battery life
" command discardall jsb browser.tabs.query({}).then(ts => browser.tabs.discard(ts.map(t=>t.id)))
 
" " Misc settings
" " Sane hinting mode
" set hintfiltermode vimperator-reflow
" set hintnames numeric
 
" " Make quickmarks for the sane Tridactyl issue view
" quickmark t https://github.com/tridactyl/tridactyl/issues?utf8=%E2%9C%93&q=sort%3Aupdated-desc+

" " URL redirects
" " New reddit is bad
" autocmd DocStart ^http(s?)://www.reddit.com js tri.excmds.urlmodify("-t", "www", "old")
 
" " Isolate Facebook in its own container
" " set auconcreatecontainer true
" " autocontain facebook\.com facebook
 
" " For syntax highlighting see https://github.com/tridactyl/vim-tridactyl
" " vim: set filetype=tridactyl




